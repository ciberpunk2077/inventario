<!-- <p>producto-movimientos works!</p>
<div class="container mt-4">
    <h3>üìú Historial de Movimientos</h3>
    <div class="actions">
        <button routerLink="/productos">Volver</button>

    </div>

    <table class="table table-striped table-bordered">
        <thead class="table-dark">
            <tr>
                <th>Fecha</th>
                <th>Tipo</th>
                <th>Cantidad</th>
                <th>Motivo</th>
                <th>Usuario</th>
                <th>Proveedor</th>
            </tr>
        </thead>

        <tbody>
            <tr *ngFor="let m of movimientos">
                <td>{{ m.fecha | date:'short' }}</td>
                <td>
                    <span class="badge" [ngClass]="{
                                'bg-success': m.tipo === 'ENTRADA',
                                'bg-danger': m.tipo === 'SALIDA'
                                }">
                        {{ m.tipo }}
                    </span>
                </td>
                <td>{{ m.cantidad }}</td>
                <td>{{ m.motivo || '‚Äî' }}</td>
                <td>{{ m.usuario }}</td>
                <td>{{ m.proveedor?.nombre || '‚Äî' }}</td>
            </tr>
        </tbody>
    </table>

    <div *ngIf="loading">Cargando...</div>
</div> -->


<div class="movimientos-container">

    <!-- Producto Card -->
    <div *ngIf="producto" class="product-card">

        <div class="product-img-wrapper" (click)="openImageModal()">
            <img class="product-img" [src]="producto.imagen || '/assets/no-image.png'" alt="Imagen del producto">
        </div>

        <div class="product-info">
            <h2>{{ producto.nombre }}</h2>

            <div class="product-meta">
                <span>SKU: {{ producto.sku || 'N/A' }}</span>
                <span>Categor√≠a: {{ producto.categoria_nombre || 'N/A' }}</span>
                <span>Marca: {{ producto.marca_nombre || 'N/A' }}</span>
            </div>
        </div>
    </div>

    <!-- Header -->
    <div class="header">
        <h3>üìú Historial de Movimientos</h3>
        <button class="btn-back" routerLink="/productos">
            ‚Üê Volver
        </button>
    </div>

    <!-- Loader -->
    <div *ngIf="loading" class="loading">
        Cargando movimientos...
    </div>

    <!-- Tabla -->
    <div *ngIf="!loading && movimientos?.length" class="table-card">
        <table>
            <thead>
                <tr>
                    <th>Fecha</th>
                    <th>Tipo</th>
                    <th>Cantidad</th>
                    <th>Motivo</th>
                    <th>Usuario</th>
                    <th>Proveedor</th>
                </tr>
            </thead>

            <tbody>
                <tr *ngFor="let m of movimientos">
                    <td>{{ m.fecha | date:'dd/MM/yyyy HH:mm' }}</td>

                    <td>
                        <span class="badge" [ngClass]="m.tipo === 'ENTRADA' ? 'badge-in' : 'badge-out'">
                            {{ m.tipo }}
                        </span>
                    </td>

                    <td>
                        <span [class.qty-in]="m.tipo === 'ENTRADA'" [class.qty-out]="m.tipo === 'SALIDA'">
                            {{ m.cantidad }}
                        </span>
                    </td>

                    <td>{{ m.motivo || '‚Äî' }}</td>
                    <td>{{ m.usuario }}</td>
                    <td>{{ m.proveedor?.nombre || '‚Äî' }}</td>
                </tr>
            </tbody>
        </table>
    </div>

    <!-- Vac√≠o -->
    <div *ngIf="!loading && !movimientos?.length" class="empty">
        üì¶ No hay movimientos registrados para este producto
    </div>
</div>

<!-- Modal Imagen -->
<div class="img-modal" *ngIf="showImageModal" (click)="closeImageModal()">

    <div class="img-modal-content" (click)="$event.stopPropagation()">
        <button class="img-modal-close" (click)="closeImageModal()">‚úï</button>

        <img [src]="producto?.imagen || '/assets/no-image.png'" alt="Imagen ampliada" (dblclick)="resetZoom()"
            [style.transform]="'scale(' + zoomLevel + ')'">
    </div>

</div>