<div class="p-6">
    <div class="flex items-center justify-between mb-6">
        <h1 class="text-3xl font-bold text-gray-800">Categorías</h1>

        <button class="btn btn-primary" (click)="abrirModalCrear()">
            + Nueva Categoría
        </button>
    </div>

    <div class="bg-white shadow rounded-lg p-6">
        <table class="table-auto w-full">
            <thead>
                <tr class="border-b">
                    <th class="text-left py-2 px-3">ID</th>
                    <th class="text-left py-2 px-3">Nombre</th>
                    <th class="text-left py-2 px-3">Descripción</th>
                    <th class="text-left py-2 px-3">Activo</th>
                    <th class="text-left py-2 px-3">Acciones</th>
                </tr>
            </thead>
            <tbody>

                <tr *ngFor="let categoria of categorias" class="border-b">
                    <td class="py-2 px-3">{{ categoria.id_categoria }}</td>
                    <td class="py-2 px-3">{{ categoria.nombre }}</td>
                    <td class="py-2 px-3">{{ categoria.descripcion }}</td>

                    <td class="py-2 px-3">
                        <span class="px-3 py-1 rounded-full text-sm font-semibold"
                            [ngClass]="categoria.activo ? 'bg-green-100 text-green-700' : 'bg-red-100 text-red-700'">
                            {{ categoria.activo ? 'Activo' : 'Inactivo' }}
                        </span>
                    </td>

                    <td class="py-2 px-3">
                        <button class="text-blue-600 mr-4" (click)="abrirModalEditar(categoria)">
                            Editar
                        </button>

                        <button class="text-red-600" (click)="eliminarCategoria(categoria.id_categoria)">
                            Eliminar
                        </button>
                    </td>
                </tr>

            </tbody>
        </table>

        <dialog id="modalCategoria" class="rounded-lg p-0 shadow-xl backdrop:bg-black/40 ">

            <div class="w-[400px] p-6 bg-white rounded-lg shadow" [formGroup]="categoriaForm">

                <h2 class="text-xl font-bold mb-4">
                    {{ editando ? 'Editar Categoría' : 'Nueva Categoría' }}
                </h2>

                <!-- Campo Nombre -->
                <div class="mb-3">
                    <label class="block mb-1 font-semibold">Nombre</label>
                    <input type="text" formControlName="nombre" class="w-full border rounded px-3 py-2" />
                </div>

                <!-- Campo Descripción -->
                <div class="mb-3">
                    <label class="block mb-1 font-semibold">Descripción</label>
                    <textarea formControlName="descripcion" class="w-full border rounded px-3 py-2"></textarea>
                </div>

                <!-- Activo -->
                <div class="mb-3 flex items-center">
                    <label class="mr-2 font-semibold">Activo:</label>
                    <input type="checkbox" formControlName="activo" />
                </div>

                <!-- Botones -->
                <div class="flex justify-end gap-3 mt-5">
                    <button type="button" class="px-4 py-2 bg-gray-300 rounded" (click)="cerrarModal()">
                        Cancelar
                    </button>

                    <button type="button" class="px-4 py-2 bg-blue-600 text-white rounded" (click)="guardarCategoria()">
                        Guardar
                    </button>
                </div>

            </div>

        </dialog>


    </div>
</div>