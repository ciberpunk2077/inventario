<div class="min-h-screen bg-gray-100 p-6">
    <div class="max-w-6xl mx-auto">

        <!-- HEADER -->
        <div class="flex items-center justify-between mb-8">
            <h1 class="text-3xl font-bold text-gray-800">Marcas</h1>

            <button class="btn btn-primary" (click)="abrirModalCrear()">+ Agregar Marca</button>
        </div>

        <!-- TABLA -->
        <div class="bg-white p-6 rounded-2xl shadow overflow-x-auto">
            <table class="min-w-full border-collapse">
                <thead>
                    <tr class="bg-gray-200 text-left text-gray-700">
                        <th class="p-3">Logo</th>
                        <th class="p-3">Nombre</th>
                        <th class="p-3">Activo</th>
                        <th class="p-3 text-center">Acciones</th>
                    </tr>
                </thead>

                <tbody>
                    <tr *ngFor="let marca of marcas" class="border-b hover:bg-gray-50 transition">

                        <!-- Logo -->
                        <td class="p-3 w-24">
                            <img *ngIf="marca.logo" [src]="marca.logo" class="h-12 object-contain" />
                            <span *ngIf="!marca.logo" class="text-gray-400">â€”</span>
                        </td>

                        <!-- Nombre -->
                        <td class="p-3 font-medium text-gray-800">{{ marca.nombre }}</td>

                        <!-- Activo -->
                        <td class="p-3">
                            <span [class]="marca.activo
                                ? 'px-3 py-1 bg-green-100 text-green-600 rounded-xl text-sm'
                                : 'px-3 py-1 bg-red-100 text-red-600 rounded-xl text-sm'">
                                {{ marca.activo ? 'Activo' : 'Inactivo' }}
                            </span>
                        </td>

                        <!-- Acciones -->
                        <td class="p-3 text-center">
                            <button class="text-blue-600 hover:underline mr-3" (click)="abrirModalEditar(marca)">
                                Editar
                            </button>

                            <button class="text-red-600 hover:underline" (click)="eliminarMarca(marca)">
                                Eliminar
                            </button>
                        </td>

                    </tr>
                </tbody>
            </table>
        </div>

        <!-- MODAL CREAR / EDITAR -->
        <div *ngIf="modalVisible" class="fixed inset-0 bg-black bg-opacity-40 flex justify-center items-center p-4">

            <div class="bg-white w-full max-w-lg p-6 rounded-2xl shadow-xl relative">

                <h2 class="text-xl font-bold mb-4 text-gray-800">
                    {{ modo === 'crear' ? 'Registrar Marca' : 'Editar Marca' }}
                </h2>

                <!-- FORMULARIO COMPARTIDO -->
                <label class="block font-medium text-gray-700 mb-1">Nombre</label>
                <input type="text" [(ngModel)]="marcaForm.nombre" name="nombre"
                    class="w-full p-2 border rounded-xl mb-4" required />

                <label class="block font-medium text-gray-700 mb-1">Activo</label>
                <select class="w-full p-2 border rounded-xl mb-4" [(ngModel)]="marcaForm.activo">
                    <option [value]="true">Activo</option>
                    <option [value]="false">Inactivo</option>
                </select>

                <!-- Logo -->
                <label class="block font-medium text-gray-700 mb-1">Logo (Imagen)</label>
                <input type="file" accept="image/*" (change)="convertirImagen($event)"
                    class="w-full p-2 border rounded-xl mb-4" />



                <!-- Vista previa -->
                <div *ngIf="vistaPreviaLogo" class="mb-4">
                    <img [src]="vistaPreviaLogo" class="h-24 object-contain border rounded-xl" />
                </div>

                <!-- Botones -->
                <div class="flex justify-end mt-4 gap-3">
                    <button class="px-4 py-2 bg-gray-300 rounded-xl hover:bg-gray-400" (click)="cerrarModal()">
                        Cancelar
                    </button>

                    <button class="px-4 py-2 bg-blue-600 text-white rounded-xl hover:bg-blue-700"
                        (click)="guardarMarca()">
                        {{ modo === 'crear' ? 'Guardar Marca' : 'Guardar cambios' }}
                    </button>
                </div>

            </div>

        </div>

    </div>
</div>