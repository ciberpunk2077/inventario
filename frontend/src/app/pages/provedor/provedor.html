<div class="min-h-screen bg-gray-100 py-10 px-4">
    <div class="max-w-5xl mx-auto bg-white p-8 rounded-2xl shadow-lg">

        <!-- Header -->
        <div class="flex items-center justify-between mb-8">
            <h1 class="text-3xl font-bold text-gray-800">Proveedores</h1>
            <button (click)="abrirModal()"
                class="px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition font-semibold">
                + Agregar Proveedor
            </button>
        </div>

        <!-- FORMULARIO -->


        <!-- TABLA -->
        <div class="mt-10">
            <table class="min-w-full border bg-white rounded-xl shadow">
                <thead>
                    <tr class="bg-gray-200 text-gray-700">
                        <th class="p-3">Logo</th>
                        <th class="p-3">Nombre</th>
                        <th class="p-3 text-center">Acciones</th>
                    </tr>
                </thead>

                <tbody>
                    <tr *ngFor="let p of proveedores" class="border-b hover:bg-gray-50">
                        <td class="p-3 w-24">
                            <img *ngIf="p.imagen" [src]="p.imagen" class="h-12 object-contain">
                            <span *ngIf="!p.imagen" class="text-gray-400 text-sm">Sin imagen</span>
                        </td>

                        <td class="p-3 font-medium text-gray-800">{{ p.nombre }}</td>

                        <td class="p-3 text-center">
                            <button (click)="abrirModal(p)" class="text-blue-600 hover:underline mr-3">
                                Editar
                            </button>
                            <button (click)="deleteProveedor(p.id_proveedor)" class="text-red-600 hover:underline">
                                Eliminar
                            </button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>

    </div>



    <!-- ===========================
          MODAL PROFESIONAL
    =========================== -->
    <div *ngIf="mostrarModal"
        class="fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm flex items-center justify-center z-50">

        <div class="bg-white w-full max-w-3xl rounded-2xl shadow-2xl animate-fadeIn flex flex-col max-h-[90vh]">

            <!-- HEADER FIJO -->
            <div class="px-6 py-4 border-b flex justify-between items-center sticky top-0 bg-white z-10">
                <h2 class="text-2xl font-bold text-gray-800">Registrar Proveedor</h2>

                <button (click)="cerrarModal()" class="text-gray-500 hover:text-red-600 text-2xl leading-none">
                    ✕
                </button>
            </div>

            <!-- CUERPO con SCROLL -->
            <div class="px-6 py-4 overflow-y-auto custom-scroll-area">

                <form [formGroup]="proveedorForm" class="space-y-6">

                    <div class="flex flex-col md:flex-row gap-6">

                        <!-- IZQUIERDA -->
                        <div class="p-4 bg-gray-100 rounded-lg shadow w-full md:w-1/2">

                            <label class="block font-medium mb-1">Nombre</label>
                            <input formControlName="nombre"
                                class="w-full p-3 mb-3 border rounded-lg focus:ring focus:ring-blue-300" />

                            <label class="block font-medium mb-1">Contacto</label>
                            <input formControlName="contacto"
                                class="w-full p-3 mb-3 border rounded-lg focus:ring focus:ring-blue-300" />

                            <label class="block font-medium mb-1">Teléfono</label>
                            <input formControlName="telefono"
                                class="w-full p-3 mb-3 border rounded-lg focus:ring focus:ring-blue-300" />

                            <label class="block font-medium mb-1">Email</label>
                            <input formControlName="email"
                                class="w-full p-3 border rounded-lg focus:ring focus:ring-blue-300" />

                        </div>

                        <!-- DERECHA -->
                        <div class="p-4 bg-gray-100 rounded-lg shadow w-full md:w-1/2 flex flex-col items-center">

                            <!-- Vista previa -->
                            <div *ngIf="vistaPrevia" class="mt-2 w-full max-w-xs aspect-square">
                                <img [src]="vistaPrevia" class="w-full h-full object-cover rounded-lg shadow">
                            </div>

                            <!-- Placeholder -->
                            <div *ngIf="!vistaPrevia"
                                class="mt-2 w-full max-w-xs aspect-square flex flex-col items-center justify-center gap-2 bg-white border-2 border-dashed border-gray-300 rounded-lg">

                                <svg class="w-12 h-12 text-gray-300" fill="none" stroke="currentColor" stroke-width="2"
                                    viewBox="0 0 24 24">
                                    <path d="M3 7v10a2 2 0 0 0 2 2h14a2
                                    2 0 0 0 2-2V7a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2z"></path>
                                    <circle cx="8.5" cy="10.5" r="1.5"></circle>
                                    <path d="M21 15l-5-5L5 21"></path>
                                </svg>

                                <span class="text-gray-400 text-sm">No hay imagen seleccionada</span>
                            </div>

                            <!-- Input File -->
                            <label class="block text-sm font-medium text-gray-700 mt-4">Logo</label>
                            <input type="file" accept="image/*" (change)="onFileSelected($event)" class="block w-full text-sm text-gray-500
                            file:mr-4 file:py-2 file:px-4
                            file:rounded-lg file:border-0
                            file:text-sm file:font-semibold
                            file:bg-blue-600 file:text-white
                            hover:file:bg-blue-700" />

                        </div>
                    </div>

                    <!-- SEGUNDA FILA -->
                    <div class="p-4 bg-gray-100 rounded-lg shadow">

                        <label class="block font-medium mb-1">Dirección</label>
                        <input formControlName="direccion"
                            class="w-full p-3 mb-3 border rounded-lg focus:ring focus:ring-blue-300" />

                        <label class="block font-medium mb-1">Fecha de registro</label>
                        <!-- <input formControlName="fecha_registro"
                            class="w-full p-3 border rounded-lg focus:ring focus:ring-blue-300" /> -->

                    </div>

                </form>
            </div>

            <!-- FOOTER FIJO -->
            <div class="px-6 py-4 border-t bg-white sticky bottom-0 flex justify-end gap-4">

                <button (click)="cerrarModal()"
                    class="px-6 py-3 bg-gray-300 hover:bg-gray-400 text-black rounded-lg font-semibold">
                    Cancelar
                </button>

                <button (click)="guardarProveedor()"
                    class="px-6 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg font-semibold">
                    Guardar
                </button>

            </div>

        </div>
    </div>



</div>